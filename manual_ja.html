<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Download Classifier - 使い方マニュアル</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 800px;
      margin: 20px auto;
      padding: 0 20px;
      background-color: #f9f9f9;
    }
    h1, h2, h3 {
      border-bottom: 2px solid #eee;
      padding-bottom: 10px;
      color: #1a237e;
    }
    h1 {
      text-align: center;
      border-bottom: 3px solid #3f51b5;
    }
    section {
      margin-bottom: 40px;
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    code {
      background-color: #eef;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
    }
    ul, ol {
      padding-left: 20px;
    }
    li {
      margin-bottom: 10px;
    }
    .button-like {
      display: inline-block;
      padding: 4px 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background-color: #f0f0f0;
      font-size: 0.9em;
    }
    .icon-button-like {
      display: inline-block;
      vertical-align: middle;
      padding: 4px;
      border: none;
      border-radius: 4px;
      background-color: #007bff;
      line-height: 1;
    }
    .icon-button-like img {
      width: 1.1em;
      height: 1.1em;
      vertical-align: middle;
      filter: brightness(0) invert(1);
    }
    .note {
      background-color: #fff9c4;
      border-left: 4px solid #fdd835;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
    }
  </style>
</head>
<body>

  <h1>Download Classifier 使い方マニュアル</h1>

  <section id="introduction">
    <h2>はじめに</h2>
    <p>
      「Download Classifier」は、あなたのダウンロードフォルダをすっきりと整理するためのChrome拡張機能です。
      ファイルの種類やダウンロード元のウェブサイトに応じて、ファイルを自動的に指定したフォルダへ振り分けるルールを作成できます。
    </p>
    <p>
      例えば、以下のようなルールを設定できます。
    </p>
    <ul>
      <li>画像ファイル (<code>.jpg</code>, <code>.png</code>) を「ピクチャ」フォルダに移動する。</li>
      <li>PDF文書 (<code>.pdf</code>) を「ドキュメント/請求書」フォルダに移動する。</li>
      <li><code>example.com</code> からダウンロードしたファイルをすべて「仕事用」フォルダに移動する。</li>
    </ul>
  </section>

  <section id="how-to-use">
    <h2>基本的な使い方</h2>
    <p>
      すべての設定は<strong>オプションページ</strong>で行います。ポップアップ画面の右上にある歯車アイコン <span class="icon-button-like"><img src="icons/gear.svg" alt="設定"></span> をクリックして開いてください。
    </p>

    <h3>1. 新しいルールを作成する</h3>
    <ol>
      <li>オプションページ左側の「ルール一覧」で、「(新規ルール)」が選択されていることを確認します。</li>
      <li>右側の「ルール詳細」セクションに必要な情報を入力します。
        <ul>
          <li><strong>ルール名:</strong> ルールの内容がわかる名前を付けます (例: 「画像ファイル」)。</li>
          <li><strong>保存先フォルダ:</strong> ファイルを保存したいフォルダ名を入力します (例: <code>images</code> や <code>documents/invoices</code>)。</li>
          <li><strong>URLパターン:</strong> 特定のウェブサイトからダウンロードしたファイルにルールを適用したい場合に入力します (例: <code>*://*.google.com/*</code>)。</li>
          <li><strong>ファイル名パターン:</strong> 特定のファイル名や拡張子にルールを適用したい場合に入力します (例: <code>*.png</code> や <code>report-*.pdf</code>)。</li>
          <li><strong>MIMEタイプ:</strong> ファイルの種類でルールを適用したい場合に入力します (例: <code>image/*</code>)。</li>
        </ul>
      </li>
      <li><span class="button-like">追加</span> ボタンをクリックしてルールを保存します。</li>
    </ol>
    <div class="note">
      <strong>重要: 保存先フォルダの制約について</strong><br>
      Chromeのセキュリティポリシーにより、ファイルの移動先は<strong>Chromeの標準ダウンロードフォルダ内</strong>に限られます。<br>
      例えば、保存先フォルダに <code>images</code> と入力すると、ファイルは「(標準ダウンロードフォルダ)<code>/images/</code>」の中に保存されます。<br>
      絶対パス (例: <code>C:\Users\...</code> や <code>/Users/...</code>) を指定することはできません。
    </div>
    <div class="note">
      <strong>ヒント: 日付/時刻でフォルダを自動作成</strong><br>
      「保存先フォルダ」に特別な文字列（プレースホルダー）を含めることで、ダウンロードした日時にもとづいてフォルダを自動的に作成できます。<br>
      例: <code>images/%Y-%m-%d</code> と指定すると、2023年10月27日にダウンロードしたファイルは <code>images/2023-10-27</code> フォルダに保存されます。<br>
      利用可能なプレースホルダーは以下の通りです。
      <ul>
        <li><code>%Y</code>: 4桁の年 (例: <code>2023</code>)</li>
        <li><code>%y</code>: 2桁の年 (例: <code>23</code>)</li>
        <li><code>%m</code>: 2桁の月 (例: <code>10</code>)</li>
        <li><code>%d</code>: 2桁の日 (例: <code>27</code>)</li>
        <li><code>%H</code>: 24時間表記の時 (例: <code>09</code>)</li>
        <li><code>%M</code>: 分 (例: <code>05</code>)</li>
        <li><code>%S</code>: 秒 (例: <code>03</code>)</li>
      </ul>
    </div>

    <div class="note">
      <strong>ヒント: パターンでのワイルドカード</strong><br>
      URL、ファイル名、MIMEタイプのパターンでは、ワイルドカードが使用できます。
      <ul>
        <li><code>*</code> (アスタリスク): 任意の文字列（0文字以上）にマッチします。</li>
        <li><code>?</code> (クエスチョンマーク): 任意の一文字にマッチします。</li>
      </ul>
      例えば、<code>*://example.com/downloads/*</code> は <code>example.com</code> の downloads ディレクトリ以下のすべてのURLにマッチします。
    </div>

    <h3>2. ダウンロード履歴からルールを作成する</h3>
    <p>
      過去にダウンロードしたファイルを使って、簡単にルールを作成することもできます。
    </p>
    <ol>
      <li>オプションページ下部の「ダウンロード履歴」セクションを見ます。</li>
      <li>ルールを作成したいファイルの横にある <span class="button-like">このファイルでルール追加</span> ボタンをクリックします。</li>
      <li>「ルール詳細」フォームに、ファイルの情報から推測されたパターンが自動的に入力されます。</li>
      <li>内容を確認・修正し、<span class="button-like">追加</span> ボタンをクリックします。</li>
    </ol>

    <h3>3. ルールをテストする</h3>
    <p>
      作成したルールが意図通りに動作するかを、保存する前に確認できます。
    </p>
    <ol>
      <li>「ルール詳細」にテストしたいルール情報を入力します。</li>
      <li><span class="button-like">テスト</span> ボタンをクリックします。</li>
      <li>「ダウンロード履歴」セクションで、ルールにマッチしたアイテムが黄色くハイライトされます。</li>
    </ol>

    <h3>4. ルールを管理する</h3>
    <ul>
      <li><strong>更新:</strong> 一覧からルールを選択し、内容を編集してから <span class="button-like">更新</span> ボタンをクリックします。</li>
      <li><strong>削除:</strong> 一覧からルールを選択し、<span class="icon-button-like"><img src="icons/trash-2.svg" alt="削除"></span> ボタンをクリックします。</li>
      <li><strong>順序変更:</strong> ルールは一覧の上から順に適用されます。 <span class="icon-button-like"><img src="icons/arrow-up.svg" alt="上へ"></span> / <span class="icon-button-like"><img src="icons/arrow-down.svg" alt="下へ"></span> ボタンで、ルールの優先順位を変更できます。最初にマッチしたルールが適用されます。</li>
    </ul>
  </section>

  <section id="popup">
    <h2>ポップアップ画面について</h2>
    <p>
      ブラウザのツールバーにある拡張機能のアイコンをクリックすると、ポップアップ画面が開きます。
    </p>
    <ul>
      <li><strong>最近のダウンロード:</strong> 直近のダウンロード履歴が表示されます。進行中のダウンロードの状況も確認できます。</li>
      <li><strong>関連ファイル:</strong> 現在開いているページのタイトルと関連性の高いと思われるファイルが、リストの上部にハイライト表示されることがあります。</li>
      <li><strong>オプションページへ移動:</strong> 右上の歯車アイコン <span class="icon-button-like"><img src="icons/gear.svg" alt="設定"></span> からオプションページを開けます。</li>
    </ul>
  </section>

</body>
</html>